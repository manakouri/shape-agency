<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SIA | Intelligence Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
    :root {
        --sia-neon: #00ff95;
        --sia-blue: #0088ff;
        --sia-bg: #0a0e14;
        --sia-card: #161b22;
    }

    body {
        background-color: var(--sia-bg);
        color: white;
        font-family: 'Segoe UI', sans-serif;
        margin: 0;
        display: flex;
        flex-direction: column;
        height: 100vh; /* Keeps the app height to the screen */
    }

    header {
        padding: 15px;
        background: #000;
        border-bottom: 2px solid var(--sia-blue);
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky; /* Keeps header at top */
        top: 0;
        z-index: 100;
    }

    main {
        flex: 1;
        overflow-y: auto; /* This enables scrolling for the content! */
        -webkit-overflow-scrolling: touch; /* Smooth scrolling for iOS */
    }

    .screen { 
        display: none; 
        padding: 20px; 
        padding-bottom: 60px; /* Space so the bottom button isn't cut off */
    }

    .active { display: block; }

    .sia-btn {
        background: transparent;
        border: 2px solid var(--sia-neon);
        color: var(--sia-neon);
        padding: 18px 25px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 2px;
        cursor: pointer;
        border-radius: 4px;
        margin: 10px 0;
        width: 100%; /* Better for touch targets */
        font-size: 1rem;
    }

    .sia-input {
        background: #000;
        border: 1px solid var(--sia-blue);
        color: white;
        padding: 15px;
        font-size: 1.1rem;
        margin-bottom: 15px;
        border-radius: 4px;
        box-sizing: border-box; /* Prevents input from being wider than screen */
    }

    .agent-pill {
        background: var(--sia-blue);
        padding: 8px 15px;
        border-radius: 20px;
        margin: 5px;
        display: inline-block;
        font-size: 0.9rem;
    }
</style>
</head>
<body>

<header style="height: 80px; padding: 0 20px; display: flex; align-items: center; justify-content: space-between; background: #000; border-bottom: 3px solid var(--sia-blue);">
    <div onclick="requestTeacherAccess()" style="display: flex; align-items: center; cursor: pointer;">
        <div style="width: 40px; height: 40px; border: 3px solid var(--sia-neon); position: relative; transform: rotate(45deg); margin-right: 15px;">
            <div style="position: absolute; width: 100%; height: 3px; background: var(--sia-neon); top: 50%; left: 0;"></div>
            <div style="position: absolute; height: 100%; width: 3px; background: var(--sia-neon); left: 50%; top: 0;"></div>
        </div>
        <div style="line-height: 1;">
            <span style="letter-spacing: 4px; font-weight: 900; font-size: 1.4rem; color: #fff;">SIA</span><br>
            <span style="font-size: 0.6rem; color: var(--sia-blue); letter-spacing: 1px;">STRATEGIC INTELLIGENCE ARCHIVE</span>
        </div>
    </div>

    <div id="header-actions" style="display: none;">
        <button onclick="showScreen('archive-screen')" style="background: none; border: 1px solid var(--sia-blue); color: var(--sia-blue); padding: 5px 10px; border-radius: 4px; margin-right: 10px; font-size: 0.7rem;">MY FILES</button>
        <button onclick="secureLogout()" style="background: var(--sia-neon); border: none; color: #000; padding: 5px 10px; border-radius: 4px; font-weight: bold; font-size: 0.7rem;">LOGOUT</button>
    </div>
</header>

<section id="archive-screen" class="screen">
    <h2 style="color: var(--sia-blue);">FIELD ARCHIVE</h2>
    <p style="font-size: 0.8rem; color: gray;">Viewing successfully filed reports for this session.</p>
    <div id="local-archive-list"></div>
    <button class="sia-btn" onclick="showScreen('mission-screen')">BACK TO MISSIONS</button>
</section>

<main id="app-container">
    <section id="login-screen" class="screen active">
        <h2 style="color: var(--sia-neon);">AGENT LOGIN</h2>
        <p>Enter 4-digit PINs for your group.</p>
        <div id="active-agents-list" style="margin-bottom:10px;"></div>
        <input type="number" id="pin-input" class="sia-input" placeholder="0000">
        <button class="sia-btn" onclick="addAgent()">Add Agent</button>
        <button class="sia-btn" style="border-color:var(--sia-blue); color:var(--sia-blue);" onclick="proceedToMissions()">Start Operation</button>
    </section>

    <section id="mission-screen" class="screen">
        <h2>AVAILABLE MISSIONS</h2>
        <div id="mission-list"></div>
    </section>

    <section id="terminal-screen" class="screen">
        <h2 id="current-mission-title">DATA LOG</h2>
        
        <div id="attribute-inputs" class="sia-card" style="background: var(--sia-card); padding: 15px; border-radius: 8px;">
            </div>
        
        <div id="reasoning-section" style="margin-top: 20px;">
            <h3>INTELLIGENCE REPORT</h3>
            
            <p id="prompt-conclusion" style="margin-bottom:5px; color: var(--sia-blue); font-weight:bold;"></p>
            <select id="box-conclusion" class="sia-input" style="width:100%"></select>

            <label>BECAUSE...</label>
            <textarea id="box-because" class="sia-input" style="width:100%; height:60px;" placeholder="Evidence..."></textarea>
            
            <label>BUT...</label>
            <textarea id="box-but" class="sia-input" style="width:100%; height:60px;" placeholder="Conflict..."></textarea>
            
            <label>SO...</label>
            <textarea id="box-so" class="sia-input" style="width:100%; height:60px;" placeholder="Final Verdict..."></textarea>
        </div>

        <button id="submit-btn" class="sia-btn" style="width:100%; margin-top:20px;" onclick="submitMission()">FILE REPORT TO COMMAND</button>
        <button class="sia-btn" style="border:none; color:gray;" onclick="showScreen('mission-screen')">CANCEL MISSION</button>
    </section>
</main>

<script type="module" src="index.js"></script>

</body>
</html>
